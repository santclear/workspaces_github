<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Color theme for statusbar -->
    <meta name="theme-color" content="#2196f3">
    <!-- Your app title -->
    <title>My App</title>
    <!-- Path to Framework7 Library CSS, Material Theme -->
    <link rel="stylesheet" href="framework7/css/framework7.material.min.css">
    <!-- Path to Framework7 color related styles, Material Theme -->
    <link rel="stylesheet" href="framework7/css/framework7.material.colors.min.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="framework7/css/my-app.css">
  </head>
  <body class='theme-green'>
    <!-- Views -->
    <div class="views">
      <!-- Your main view, should have "view-main" class -->
      <div class="view view-main">
        <!-- Pages container, because we use fixed navbar and toolbar, it has additional appropriate classes-->
        <div class="pages navbar-fixed toolbar-fixed">
          <!-- Page, "data-page" contains page name -->
          <div data-page="index" class="page">
 
            <!-- Top Navbar. In Material theme it should be inside of the page-->
            <div class="navbar">
              <div class="navbar-inner">
                <div class="center">DevMedia - Terefas</div>
              </div>
            </div>
 
            <!-- Bottom Toolbar. In Material theme it should be inside of the page-->
            <div class="toolbar">
              <div class="toolbar-inner">
                <!-- Toolbar links -->
                <a href="#" class="link">Link 1</a>
                <a href="#" class="link">Link 2</a>
              </div>
            </div>
 
            <!-- Scrollable page content -->
            <div class="page-content">
			<div class="content-block-title">Lista de Terefas</div>
				<div class="list-block media-list" id="item-tarefa">
				  <ul>
					<li style='display: block' id="primeiro">
					  <label class="label-checkbox item-content">
						<input type="checkbox" name="my-checkbox" class="check-tarefa" id="tarefa0">
						<div class="item-media"><i class="icon icon-form-checkbox"></i></div>
						<div class="item-inner">
						  <div class="item-title-row">
							<div class="item-title">Facebook</div>
							<div class="item-after">
								<a href='#' class="button button-fill button-raised btn-ver" style="padding-top:3px">
									<img src='img/eye.png' />
								</a>
								<div class="item-after">
									<a href='#' class="button button-fill button-raised btn-remover" style="padding-top:5px">
										<img src='img/remove.png' />
									</a>
								</div>
							</div>
						  </div>
						</div>
					  </label>
					</li>
				  </ul>
				</div>
				<div class="content-block">
					<div class="list-block">
						<div class="item-content">
						<div class="item-inner">
						  <div class="item-input">
							<input type='text' id='new-tarefa' placeholder='Nova terefa...'/>
						  </div>
						</div>
						</div>
					</div>
					<a href='#' class="button button-fill button-raised" onclick='criarNovaTarefa()'>Adicionar Tarefa</a>
				</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Path to Framework7 Library JS-->
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/jquery-2.2.3.js"></script>
    <script type="text/javascript" src="framework7/js/framework7.min.js"></script>
    <!-- Path to your app js-->
    <script type="text/javascript" src="framework7/js/my-app.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			
		});
	
		function showAlert() {
			navigator.notification.confirm(
				'You are the winner!',  // message
				null,         			// callback
				'Game Over',            // title
				['Restart','Exit']      // buttonName
			);
		}
		
		function criarNovaTarefa() {
			var tarefa = {};
			
			var descricao = $('#new-tarefa').val();
			if(descricao != null) {
				if(descricao == '') {
					myApp.alert('A tarefa não pode estar vazia!', 'Alerta');
				} else {
					tarefa = {check: false, texto: descricao};
					addItemLista(tarefa);
					$('#new-tarefa').val('');
				}
			}
		}
		
		var idItem = 0;
		function addItemLista(tarefa) {
			idItem += 1;
			var clone = $('#item-tarefa li#primeiro').clone().removeAttr('id').appendTo('#item-tarefa ul');
			clone.find('.check-tarefa').attr('id', 'tarefa'+ idItem).prop('checked', tarefa.check);
			clone.find('.item-title').text(tarefa.texto);
			setClickVer();
		}
		
		function setClickVer() {
			// itera por todos os li a partir do #item-tarefa
			$('#item-tarefa li').each(function() {
				// busca o id da tarefa atual
				var id = $(this).find('.check-tarefa').attr('id');
				// procura o btn-ver, desfaz o clique, depois clica novamente
				$(this).find('.btn-ver').unbind('click').click(function(){
					// a partir do id procurado, busca todo os irmãos para o obter o item-inner, para depois pegar o texto do item
					var texto = $('#'+ id).siblings('.item-inner').find('.item-title').text();
					myApp.alert(texto, 'Item da Lista');
				});
			});
		}
	</script>
  </body>
</html>